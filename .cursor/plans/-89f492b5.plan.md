---
name: خطة إعادة هيكلة صفحة التحصيلات وإنشاء صفحة السجلات
overview: ""
todos:
  - id: 55273c3c-092c-44c2-ac47-401e22b9c9d6
    content: تحليل الصفحة الحالية sales_collections وفهم بنيتها بالكامل
    status: pending
  - id: a16de210-9823-4759-bf20-d5ccaad34a86
    content: حذف كامل كتلة sales_collections من dashboard/sales.php (الكود، JavaScript، التوجيه)
    status: pending
  - id: f34f5e46-3013-479f-bd68-e52a2882a3a5
    content: إزالة روابط sales_collections من sidebar_sales.php و homeline_sidebar.php
    status: pending
  - id: a9a1ffca-9d45-438a-9518-41feb1b71500
    content: إنشاء صفحة sales_records جديدة في dashboard/sales.php مع تصميم محسّن للجدول
    status: pending
  - id: c6d4b89b-f4e1-441c-8d43-e8c516391c22
    content: إضافة رابط السجلات الجديد في الشريط الجانبي (sidebar_sales.php و homeline_sidebar.php)
    status: pending
  - id: 03c9f28f-e788-4735-bf6c-490ed6efd40e
    content: التحقق من توافق RTL والتصميم في الصفحة الجديدة
    status: pending
---

# خطة إعادة هيكلة صفحة التحصيلات وإنشاء صفحة السجلات

## 1. تحليل الصفحة الحالية

- **الملف**: `dashboard/sales.php` (السطور 413-582)
- **الوظيفة**: صفحة `sales_collections` تعرض تبويبات (المبيعات، التحصيلات، المرتجعات)
- **البيانات**: تعرض بيانات من `modules/sales/sales.php` في تبويب المبيعات
- **الفلاتر**: عميل، حالة، تاريخ من/إلى
- **التصميم**: جدول تقليدي مع Bootstrap

## 2. حذف صفحة التحصيلات

- **الملف**: `dashboard/sales.php`
- حذف كامل كتلة `elseif ($page === 'sales_collections')` (السطور 413-582)
- حذف منطق التوجيه الذي يحول `sales/collections/sales_collections` إلى `sales_collections` (السطور 56-70)
- حذف JavaScript المرتبط بصفحة `sales_collections` (السطور 828-1556)
- حذف تحديث `$pageTitle` لـ `sales_collections` (السطور 78-80)

## 3. إزالة الروابط من الشريط الجانبي

- **الملف**: `templates/sidebar_sales.php`
- حذف رابط "مبيعات و تحصيلات" (السطور 49-54)
- **الملف**: `templates/homeline_sidebar.php`
- حذف رابط "مبيعات و تحصيلات" من قائمة `sales` (السطور 334-340)

## 4. إنشاء صفحة السجلات الجديدة

- **الملف**: `dashboard/sales.php`
- إضافة معالجة `elseif ($page === 'sales_records')` بعد صفحة `customers`
- استخدام نفس منطق جلب البيانات من `modules/sales/sales.php`
- تطبيق تصميم محسّن للجدول:
- ألوان متناسقة مع الموقع
- تحسينات بصرية (shadows, borders, hover effects)
- تحسين عرض الحالات (badges محسّنة)
- تحسين الفلاتر (تصميم أفضل)
- الحفاظ على RTL

## 5. إضافة رابط السجلات للشريط الجانبي

- **الملف**: `templates/sidebar_sales.php`
- إضافة رابط جديد "السجلات" بعد رابط "العملاء"
- استخدام أيقونة مناسبة (مثل `bi-journal-text` أو `bi-file-earmark-text`)
- **الملف**: `templates/homeline_sidebar.php`
- إضافة رابط "السجلات" في قائمة `sales` بعد "العملاء"

## 6. ضمان الجودة

- الحفاظ على نفس الوظائف (الفلاتر، التصفح، الصلاحيات)
- التأكد من توافق RTL
- الحفاظ على نفس استعلامات قاعدة البيانات
- التأكد من عدم كسر أي وظائف موجودة