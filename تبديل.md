ุชุญุณููุงุช ูุธุงู ุงุณุชุจุฏุงู ุงูููุชุฌุงุช
ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุงุณุชุจุฏุงู ุงูููุชุฌุงุช ููุญูู ููุงู ูุธุงู ุงููุฑุชุฌุนุงุช ุงูุณุงุจูุ ูุน ุงูุญูุงุธ ุนูู ููุณ ูุณุชูู ุงูุฏูุฉ ูุงูุชุญูู ูุงูุฑุจุท ุจูู ุงููุฎุงุฒู ูุงูููุงููุงุช ูุงููุนุงูุฌุฉ ุงููุงููุฉุ ูููู ููู ุขููุฉ ุฌุฏูุฏุฉ ุชุนุชูุฏ ุนูู ุงุณุชุจุฏุงู ุงูููุชุฌ ุจููุชุฌ ุขุฎุฑ ุจุฏูุงู ูู ุฅุฑุฌุงุนู.

1. ุฅุฑุณุงู ุทูุจ ุงูููุงููุฉ

โ ุนูุฏูุง ูููู ุงูููุฏูุจ ุจุนูู ุทูุจ ุงุณุชุจุฏุงู ูู ุตูุญุฉ ุงูุนููุงุก ุงูุฎุงุตุฉ ุจูุ ูุชู ุฅุฑุณุงู ุทูุจ ููุงููุฉ ุชููุงุฆูุงู ุฅูู ุตูุญุฉ ุงููุฏูุฑ.

โ ุฑุงุจุท ุตูุญุฉ ุงูููุงููุงุช:
manager.php?page=approvals&section=replacements

โ ูุชู ุนุฑุถ ุทูุจุงุช ุงูุงุณุชุจุฏุงู ุงููุนููุฉ ูู ูุณู "ุทูุจุงุช ุงูุงุณุชุจุฏุงู" ุจุฏู "ุทูุจุงุช ุงููุฑุชุฌุนุงุช".

2. ูุนุงูุฌุฉ ุงูุงุณุชุจุฏุงู ุจุนุฏ ุงูููุงููุฉ
ุฃ. ุฎุตู ุงูููุชุฌ ุงููุฏูู ูุฅุถุงูุฉ ุงูููุชุฌ ุงูุฌุฏูุฏ ุฅูู ูุฎุฒู ุงูููุฏูุจ

ุนูุฏ ุงูููุงููุฉ ุนูู ุทูุจ ุงูุงุณุชุจุฏุงู:

ูุชู ุฎุตู ูููุฉ ุงูููุชุฌ ุงูููุณุชุจุฏูู (ุงููุฏูู) ูู ูุฎุฒู ุณูุงุฑุฉ ุงูููุฏูุจ

ุงูุจุญุซ ุนู Batch Number ุฅู ูุฌุฏ

ุฅุฐุง ูุงูุช ุงููููุฉ ุงููุชููุฑุฉ ุฃูู ูู ุงููุทููุจ โ ูุธูุฑ ุฎุทุฃ

ูุชู ุฅุถุงูุฉ ุงูููุชุฌ ุงูุจุฏูู (ุงูุฌุฏูุฏ) ุฅูู ูุฎุฒู ุงูุณูุงุฑุฉ

ูุชู ุงูุจุญุซ ุนู Batch ูุทุงุจูุฉ

ุฅุฐุง ูู ููู ููุฌูุฏุงู: ูููุดุฃ Batch ุฌุฏูุฏ

ุงููููุงุช ุงููุนุฏูุฉ:

includes/replacement_inventory_manager.php
(ุจุฏูู return_inventory_manager.php)

ุชู ุฅุถุงูุฉ ุชุญุณููุงุช ุชุดูู:

ุงูุจุญุซ ุนู Batch Number ุจุงุณุชุฎุฏุงู:

finished_batch_id

finished_batch_number

ุฏุนู ุงูุงุณุชุจุฏุงู ุจููุชุฌุงุช ุจุฏูู Batch

ุฏุนู ุงุณุชุจุฏุงู ููุชุฌ ุจููุชุฌ ุฐู Batch ูุฎุชูู

ุจ. ุชุณุฌูู ุงูุนูููุฉ

ุจุนุฏ ูุฌุงุญ ุงูุงุณุชุจุฏุงู:

ูุชู ุชุณุฌูู ุงูุนูููุฉ ูู ุฌุฏูู replacements ุจุญุงูุฉ processed

ุชุณุฌูู ูู ุฎุทูุฉ ูู audit_logs ุชุญุช ุฃุญุฏุงุซ:

process_replacement_financials

replacement_inventory_update

approve_replacement

3. ุงูุญุณุงุจ ุงููุงูู ูุนูููุฉ ุงูุงุณุชุจุฏุงู
ููููู ุฌุฏูุฏ:

ูู ูุธุงู ุงูุงุณุชุจุฏุงูุ ูุง ูุชู ุฅุถุงูุฉ ุฑุตูุฏ ุฏุงุฆู ููุนููู ููุง ูู ุงููุฑุชุฌุนุงุช.
ุงูุขููุฉ ุฃุตุจุญุช ุชุนุชูุฏ ุนูู ุงููุฑู ุจูู ุณุนุฑ ุงูููุชุฌ ุงููุฏูู ูุงูุฌุฏูุฏ.

ุงูููุงุนุฏ ุงููุทุจูุฉ:
1. ุฅุฐุง ูุงู ุณุนุฑ ุงูููุชุฌ ุงูุฌุฏูุฏ = ุณุนุฑ ุงููุฏูู

ูุง ููุฌุฏ ุฃู ุชุบููุฑ ูุงูู

ูุง ูุชู ุฅุถุงูุฉ ุฃู ุฎุตู ุฃู ุฑุตูุฏ

2. ุฅุฐุง ูุงู ุงูููุชุฌ ุงูุฌุฏูุฏ ุฃุบูู ูู ุงูููุชุฌ ุงููุฏูู:

ูุชู ุชุญููู ุงูุนููู ูุฑู ุงูุณุนุฑ

ุงููุฑู = ุณุนุฑ ุงูุฌุฏูุฏ โ ุณุนุฑ ุงููุฏูู

ูุณุฌูู ูู ุฏูู (Debit) ุนูู ุงูุนููู

3. ุฅุฐุง ูุงู ุงูููุชุฌ ุงูุฌุฏูุฏ ุฃุฑุฎุต:

ูุชู ุฅุถุงูุฉ ุงููุฑู ูุฑุตูุฏ ุงูุนููู ูุฑุตูุฏ ุฏุงุฆู (Credit)

4. ุฅุฐุง ูุงู ููุนููู ุฑุตูุฏ ุณุงุจู:

ุชุชู ุงูุชุณููุฉ ุชููุงุฆูุงู:

ุฅุฐุง ูุงู ูุฏูู ุฑุตูุฏ ุฏุงุฆู โ ูุชู ุฎุตู ูููุฉ ุงูุงุณุชุจุฏุงู ููู

ุฅุฐุง ูุงู ูุฏูู ุฑุตูุฏ ูุฏูู โ ูุชู ุงูุฅุถุงูุฉ ุนููู ุฃู ุชุฎูููู ุญุณุจ ุงููุฑู

ุงููููุงุช ุงููุนุฏูุฉ:

includes/replacement_financial_processor.php
(ุจุฏูู return_financial_processor.php)

4. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (Validation)

ุชู ุชูุนูู ุงูุชุญูู ุงููุงูู ูุจู ุชูููุฐ ุนูููุฉ ุงูุงุณุชุจุฏุงู:

ุงูุชุญูู ูู ูุนุฑู ุงูุนููู

ุงูุชุญูู ูู ูุฌูุฏ ูู ูู:

ุงูููุชุฌ ุงููุฏูู

ุงูููุชุฌ ุงูุฌุฏูุฏ

ุงูุชุญูู ูู ุงููููุงุช

ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูููุฏูุจ

ุงูุชุฃูุฏ ูู ุฃู ุงูุนููู ูุฏูู ุชูุงุตู ุชุฌุงุฑู ููุนู

ุงูุชุญูู ูู ุชููุฑ ุงูููุชุฌ ุงููุฏูู ูู ูุฎุฒู ุงูุณูุงุฑุฉ

ุงูููู ุงููุนุฏู:

api/approve_replacement.php

5. ุงููููุงุช ุงููุนุฏูุฉ
1. includes/replacement_inventory_manager.php

ุฎุตู ุงูููุชุฌ ุงููุฏูู ูู ุงููุฎุฒู

ุฅุถุงูุฉ ุงูููุชุฌ ุงูุฌุฏูุฏ

ุฏุนู batch ูุงูููุชุฌุงุช ุจุฏูู batch

ุชุณุฌูู ุดุงูู ูู audit_logs

2. includes/replacement_financial_processor.php

ุญุณุงุจ ูุฑู ุงูุณุนุฑ

ูุนุงูุฌุฉ ุงูุฏูู / ุงูุฑุตูุฏ

ุชุณุฌูู ุงููุชุงุฆุฌ

3. api/approve_replacement.php

Validation ุดุงูู

ูุนุงูุฌุฉ ุงูุงุณุชุจุฏุงู

ุชุณุฌูู ุงูุฃุญุฏุงุซ

ูููุงุช ุชุนูู ููุง ูู:

api/replacement_requests.php

modules/manager/replacement_approvals.php

includes/approval_system.php

6. ุณูุฑ ุงูุนูู ุงููุงูู
ุฃ. ุฅูุดุงุก ุทูุจ ุงุณุชุจุฏุงู (ูู ูุจู ุงูููุฏูุจ)

ุงูููุฏูุจ ูุฎุชุงุฑ ุงูุนููู

ูุญุฏุฏ ุงูููุชุฌ ุงููุฑุงุฏ ุงุณุชุจุฏุงูู

ูุฎุชุงุฑ ุงูููุชุฌ ุงูุจุฏูู

ูุชู ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู replacements ุจุญุงูุฉ pending

ูุชู ุฅุฑุณุงู ุทูุจ ููุงููุฉ ูููุฏูุฑ

ุจ. ุงูููุงููุฉ ุนูู ุงูุงุณุชุจุฏุงู (ูู ูุจู ุงููุฏูุฑ)

ุนูุฏ ุงูููุงููุฉ:

ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู approved

ุงููุนุงูุฌุฉ ุงููุงููุฉ:

ุญุณุงุจ ูุฑู ุงูุณุนุฑ

ุชุณููุฉ ุงูุฑุตูุฏ

ุชุนุฏูู ุงููุฎุฒูู:

ุฎุตู ุงููุฏูู

ุฅุถุงูุฉ ุงูุฌุฏูุฏ

ุชุณุฌูู ุงูุนูููุฉ ูู audit_logs

ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู processed

7. ููุงุญุธุงุช ูููุฉ

ูู ุงูุนูููุงุช ุชูููุฐ ูู Transactions

ูุฏุนู ุงูููุชุฌุงุช ุจูุฌูุฏ ุฃู ุจุฏูู Batch Number

ุชุณุฌูู ูุงูู ููู ุฎุทูุฉ

ุงููุธุงู ุตุงุฑ ูุฏุนู ุงุณุชุจุฏุงู ููุชุฌ ุจููุชุฌ ุขุฎุฑ ุฐู:

ุณุนุฑ ูุฎุชูู

Batch ูุฎุชูู

ูุฆุฉ ูุฎุชููุฉ

8. ุงูุงุฎุชุจุงุฑ
ููุตุญ ุจุงุฎุชุจุงุฑ ุงูุญุงูุงุช ุงูุชุงููุฉ:

ุงุณุชุจุฏุงู ููุชุฌ ูุฏูู ุจููุชุฌ ุฌุฏูุฏ ุจููุณ ุงูุณุนุฑ
โ ูุง ุชุบููุฑ ูุงูู

ุงุณุชุจุฏุงู ููุชุฌ ุฃุฑุฎุต ุจููุชุฌ ุฃุบูู
โ ุฅุถุงูุฉ ูุฑู ุงูุณุนุฑ ูุฏูู

ุงุณุชุจุฏุงู ููุชุฌ ุฃุบูู ุจููุชุฌ ุฃุฑุฎุต
โ ุฅุถุงูุฉ ุงููุฑู ูุฑุตูุฏ ุงูุนููู

ุงุณุชุจุฏุงู ุจูุฌูุฏ Batch
โ ูุชู ุชุนุฏููู ุจุดูู ุตุญูุญ

ุงุณุชุจุฏุงู ุจุฏูู Batch
โ ูุชู ุฅูุดุงุก ุณุฌู ุฌุฏูุฏ

๐ช ููู ุฑูู 2: ููุงุนุฏ ุฎุตู ูุณุจุฉ ุงูููุฏูุจ โ ูุธุงู ุงูุงุณุชุจุฏุงู ุงูุฌุฏูุฏ
ูุธุฑุฉ ุนุงูุฉ

ูู ูุธุงู ุงูุงุณุชุจุฏุงู ูุง ูุชู ุฎุตู โูุณุจุฉ ูุฑุชุฌุนโุ
ุจู ูุชู ุฎุตู ูุณุจุฉ ุจูุงุกู ุนูู ูุฑู ุณุนุฑ ุงูุงุณุชุจุฏุงู.

ุงูููุงุนุฏ ุงูุฌุฏูุฏุฉ
ุงููุงุนุฏุฉ 1: ุฅุฐุง ูุงู ููุนููู ุฑุตูุฏ ุฏุงุฆู ุฃูุจุฑ ูู ูููุฉ ูุฑู ุงูุงุณุชุจุฏุงู

ูุง ูุชู ุฎุตู ุฃู ูุจูุบ ูู ุงูููุฏูุจ

ุฎุตู = 0%

ุงููุงุนุฏุฉ 2: ุฅุฐุง ูุงู ุฑุตูุฏ ุงูุนููู ูุฏูู ูุฃูู ูู ูููุฉ ูุฑู ุงูุงุณุชุจุฏุงู

ุงููุฑู = ูููุฉ ูุฑู ุงูุงุณุชุจุฏุงู โ ุงูุฏูู ุงูุญุงูู

ูุชู ุฎุตู 2% ูู ูุฐุง ุงููุฑู ูู ูุณุจุฉ ุชุญุตููุงุช ุงูููุฏูุจ

ุงููุงุนุฏุฉ 3: ุฅุฐุง ูุงู ุฑุตูุฏ ุงูุนููู = 0 ุฃู ุฏุงุฆู ูููู ุฃูู ูู ูุฑู ุงูุงุณุชุจุฏุงู

ูุฎุตู 2% ูู ูุงูู ูุฑู ุงูุงุณุชุจุฏุงู

ุงููููุงุช ุงููุนุฏูุฉ
1. includes/replacement_salary_deduction.php

(ุจุฏูู: return_salary_deduction.php)

ุงูุชุนุฏููุงุช:

ุญุณุงุจ ูุณุจุฉ ุงูุฎุตู ุจูุงุกู ุนูู ูุฑู ุงูุงุณุชุจุฏุงู ูููุณ ุงููุฑุชุฌุน

ุชุทุจูู ุงูููุงุนุฏ ุงูุซูุงุซ ุงูุฌุฏูุฏุฉ

ุชุณุฌูู ูู ุงูุชูุงุตูู ูู audit_logs

2. includes/replacement_financial_processor.php

ุญูุธ ุงูุฑุตูุฏ ูุจู ุงูุงุณุชุจุฏุงู

ุงุณุชุฎุฏุงูู ูุงุญุชุณุงุจ ูุณุจุฉ ุงูุฎุตู

ุณูุฑ ุงูุนูู

ุนูุฏ ุงูููุงููุฉ ุนูู ุงูุงุณุชุจุฏุงู:

processReplacementFinancials()

updateInventoryForReplacement()

applyReplacementSalaryDeduction()

ูุน ุงูุชุณุฌูู ูู audit_logs ูู ูู ุฎุทูุฉ.

ุชุณุฌูู ุฎุตู ุงูููุฏูุจ
1. ุฌุฏูู salaries:

ุฅุถุงูุฉ ูููุฉ ุงูุฎุตู

ุชุญุฏูุซ total_amount

2. ุฌุฏูู audit_logs:

ูุณุฌู:

ูููุฉ ูุฑู ุงูุงุณุชุจุฏุงู

ุงูุฑุตูุฏ ุงูุณุงุจู

ุงููุงุนุฏุฉ ุงููุณุชุฎุฏูุฉ

ูููุฉ ุงูุฎุตู ุงูููุงุฆูุฉ

ุฃูุซูุฉ ุนูููุฉ
ูุซุงู 1 โ ุชุทุจูู ุงููุงุนุฏุฉ 1

ุฑุตูุฏ ุงูุนููู ุงูุฏุงุฆู: 600
ูุฑู ุงูุงุณุชุจุฏุงู: 400
โ 600 > 400 โ ูุง ุฎุตู
ุงููุชูุฌุฉ: 0 ุฌููู

ูุซุงู 2 โ ุงููุงุนุฏุฉ 2

ุฑุตูุฏ ุฏูู: 200
ูุฑู ุงูุงุณุชุจุฏุงู: 700
x = 700 โ 200 = 500
ุงูุฎุตู = 2% ร 500 = 10 ุฌููู

ูุซุงู 3 โ ุงููุงุนุฏุฉ 3

ุฑุตูุฏ = 0
ูุฑู ุงูุงุณุชุจุฏุงู = 500
ุงูุฎุตู = 2% ร 500 = 10 ุฌููู

ูุซุงู 4 โ ุฑุตูุฏ ุฏุงุฆู ุฃูู ูู ูุฑู ุงูุงุณุชุจุฏุงู

ุฑุตูุฏ ุฏุงุฆู = 150
ูุฑู ุงูุงุณุชุจุฏุงู = 500
ุชุทุจู ุงููุงุนุฏุฉ 3
ุงูุฎุตู = 2% ร 500 = 10 ุฌููู

ููุงุญุธุงุช ูููุฉ

ุงููุธุงู ูุนุชูุฏ ุฏุงุฆูุงู ุนูู ุงูุฑุตูุฏ ูุจู ุงูุงุณุชุจุฏุงู

ูููุน ุชูุฑุงุฑ ุงูุฎุตู

ุงููุธุงู ูุณุฌู ูู ุฎุทูุฉ ููุชุฏููู ุงููุงูู

ุฌููุน ุงูุนูููุงุช ุชุนูู ุฏุงุฎู ูุนุงููุงุช ูุถูุงู ุงูุงุชุณุงู